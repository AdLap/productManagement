import{d as x,r as n,o as i,c as V,w as t,a as A,F as $,b as B,e,f as v,t as b,_ as I,g as z,u as F,h as H,s as U,i as T,j as S,m as J,k as g,l as K,n as O,p as j,q as Q,v as W}from"./index-581f4e68.js";const X=x({__name:"ProductListGrid",props:{products:null},setup(d){const m=u=>{z.push({name:"product",params:{id:u}})};return(u,h)=>{const r=n("VProgressCircular"),a=n("VRow"),_=n("VImg"),c=n("VCardTitle"),p=n("VCardText"),f=n("VCard"),C=n("VCol");return i(),V(a,{class:"mt-0"},{default:t(()=>[(i(!0),A($,null,B(d.products,o=>(i(),V(C,{cols:"12",sm:"6",md:"4",lg:"3",key:o.id,onClick:l=>m(o.id)},{default:t(()=>[e(f,{class:"product-card-grid text-sx-center ma-3"},{default:t(()=>[e(_,{src:o.images[0],cover:"",class:"mx-auto","max-width":"200",height:"200"},{placeholder:t(()=>[e(a,{class:"fill-height ma-0",align:"center",justify:"center"},{default:t(()=>[e(r,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:2},1032,["src"]),e(c,null,{default:t(()=>[v(b(o.title),1)]),_:2},1024),e(p,null,{default:t(()=>[v(b(o.description),1)]),_:2},1024),e(I,{"product-id":o.id},null,8,["product-id"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})}}}),Y=x({__name:"ProductListList",props:{products:null},setup(d){const m=u=>{z.push({name:"product",params:{id:u}})};return(u,h)=>{const r=n("VProgressCircular"),a=n("VRow"),_=n("VImg"),c=n("VCol"),p=n("VCardTitle"),f=n("VCardText"),C=n("VListItem"),o=n("VList");return i(),V(a,null,{default:t(()=>[e(c,null,{default:t(()=>[e(o,{lines:"one","max-width":"1024",class:"mx-auto mt-4"},{default:t(()=>[(i(!0),A($,null,B(d.products,l=>(i(),V(C,{key:l.id,onClick:P=>m(l.id)},{default:t(()=>[e(a,{class:"pa-5 align-center"},{default:t(()=>[e(c,{cols:"2",class:"d-none d-sm-flex"},{default:t(()=>[e(_,{"max-width":"200",height:"200",src:l.images[0],cover:""},{placeholder:t(()=>[e(a,{class:"fill-height ma-0",align:"center",justify:"center"},{default:t(()=>[e(r,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:2},1032,["src"])]),_:2},1024),e(c,{cols:"10",sm:"8"},{default:t(()=>[e(p,null,{default:t(()=>[v(b(l.title),1)]),_:2},1024),e(f,null,{default:t(()=>[v(b(l.description),1)]),_:2},1024)]),_:2},1024),e(c,{cols:"2"},{default:t(()=>[e(I,{"product-id":l.id},null,8,["product-id"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})}}}),ee=j("span",{class:"text-h5"},"Add product",-1),te=x({__name:"AddProductForm",setup(d){const m=F(),u=H(),{categories:h}=U(u),r=T({}),a=S({get(){return r.value.images},set(o){const l=o.toString().split(",");r.value.images=[...l]}}),_=T({title:[o=>o?o.length<3?"The title should be longer than 3 characters":o.length>63?"The title should be less than 64 characters":!0:"Enter title"],description:[o=>o?o.length<32?"The description should be longer than 32 characters":o.length>128?"The description should be less than 128 characters long":!0:"Enter description"],price:[o=>o?o<=0?"Price must be positive":/[0-9]?[0-9]?(\.[0-9][0-9]?)?/gm.test(o)?!0:"Enter a number":"Enter price"],images:[o=>o?/^((http(s):\/\/.)[-a-zA-Z0-9@:%.~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%.~#?&//=]*)([^ ,;$]*[ ]*))/gm.test(o)?!0:"Enter the correct URL":"Add links to pictures"],category:[o=>o?!0:"Select a category"]}),c=T(!1),p=T(null),f=async()=>await p.value.validate(),C=()=>{f().then(o=>{if(console.log(o),!o.valid){console.error(o.errorMessages);return}m.addProduct(r.value)})};return(o,l)=>{const P=n("VBtn"),k=n("VCardTitle"),w=n("VTextField"),L=n("VSelect"),y=n("VCol"),q=n("VTextarea"),R=n("VRow"),E=n("VContainer"),D=n("VForm"),N=n("VSpacer"),G=n("VCardActions"),M=n("VCard"),Z=n("VDialog");return i(),V(Z,{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=s=>c.value=s),"max-width":"800"},{activator:t(({props:s})=>[e(P,J({"prepend-icon":"mdi-note-plus"},s),{default:t(()=>[v("Add")]),_:2},1040)]),default:t(()=>[e(M,null,{default:t(()=>[e(k,null,{default:t(()=>[ee]),_:1}),e(D,{"fast-fail":"",ref_key:"form",ref:p},{default:t(()=>[e(E,null,{default:t(()=>[e(R,null,{default:t(()=>[e(y,{cols:"12",sm:"6"},{default:t(()=>[e(w,{label:"Title",required:"",modelValue:r.value.title,"onUpdate:modelValue":l[0]||(l[0]=s=>r.value.title=s),rules:_.value.title},null,8,["modelValue","rules"]),e(w,{label:"Price",required:"",modelValue:r.value.price,"onUpdate:modelValue":l[1]||(l[1]=s=>r.value.price=s),rules:_.value.price},null,8,["modelValue","rules"]),e(L,{items:g(h),"item-title":"name","item-value":"id",label:"Category",required:"",modelValue:r.value.categoryId,"onUpdate:modelValue":l[2]||(l[2]=s=>r.value.categoryId=s),rules:_.value.category},null,8,["items","modelValue","rules"])]),_:1}),e(y,{cols:"12",sm:"6"},{default:t(()=>[e(q,{label:"Description",required:"",modelValue:r.value.description,"onUpdate:modelValue":l[3]||(l[3]=s=>r.value.description=s),rules:_.value.description},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(w,{label:"Add pictures",hint:"add the full url to the pictures by separating them with a comma","persistent-hint":"",required:"",modelValue:g(a),"onUpdate:modelValue":l[4]||(l[4]=s=>K(a)?a.value=s:null),rules:_.value.images},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},512),e(G,null,{default:t(()=>[e(N),e(P,{color:"blue-darken-1",variant:"text",onClick:l[5]||(l[5]=s=>c.value=!1)},{default:t(()=>[v(" Close ")]),_:1}),e(O,{title:"save",message:"Are you sure to save the changes?","prepend-icon":"mdi-content-plus",onAgree:C})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ne=x({__name:"LoadingSpinner",props:{size:null,width:null,color:null,loading:{type:Boolean}},setup(d){return(m,u)=>{const h=n("VProgressCircular"),r=n("VRow");return d.loading?(i(),V(r,{key:0,class:"fill-height ma-0",align:"center",justify:"center"},{default:t(()=>[e(h,{indeterminate:"",size:d.size,width:d.width,color:d.color},null,8,["size","width","color"])]),_:1})):Q("",!0)}}}),oe=j("h2",{class:"me-auto"},"Product List",-1),le=x({__name:"ProductList",setup(d){const m=F(),{products:u,loading:h,displayGrid:r}=U(m);W(()=>{u.value.length||m.getAll()});const a=T({currPage:1,length:100,perPage:25}),_=S(()=>Math.ceil(a.value.length/a.value.perPage)),c=S(()=>{const p=a.value.perPage*a.value.currPage;return u.value.slice(p-a.value.perPage,p)});return(p,f)=>{const C=n("VIcon"),o=n("VBtn"),l=n("VSheet"),P=n("VPagination"),k=n("VContainer"),w=n("VCol"),L=n("VRow");return i(),V(k,{fluid:"",class:"h-100 d-flex flex-column"},{default:t(()=>[e(l,{elevation:"4",class:"d-flex justify-space-between pa-3"},{default:t(()=>[oe,e(te),e(o,{onClick:g(m).changeListGrid,class:"ml-4"},{default:t(()=>[e(C,{icon:g(r)?"mdi-view-list":"mdi-view-grid"},null,8,["icon"])]),_:1},8,["onClick"])]),_:1}),e(ne,{loading:g(h),size:128,width:12,color:"grey-lighten-5"},null,8,["loading"]),g(r)?(i(),V(X,{key:0,products:g(c)},null,8,["products"])):(i(),V(Y,{key:1,products:g(c)},null,8,["products"])),e(L,{justify:"center",align:"end"},{default:t(()=>[e(w,{cols:"6"},{default:t(()=>[e(k,{class:"max-width"},{default:t(()=>[e(P,{modelValue:a.value.currPage,"onUpdate:modelValue":f[0]||(f[0]=y=>a.value.currPage=y),length:g(_),rounded:"0",class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),ae=x({__name:"ProductListView",setup(d){return(m,u)=>(i(),V(le))}});export{ae as default};
